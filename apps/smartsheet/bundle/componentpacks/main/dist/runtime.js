(()=>{var M=Object.create;var W=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var S=Object.getPrototypeOf,P=Object.prototype.hasOwnProperty;var k=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var A=(i,e,r,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of D(e))!P.call(i,t)&&t!==r&&W(i,t,{get:()=>e[t],enumerable:!(s=O(e,t))||s.enumerable});return i};var v=(i,e,r)=>(r=i!=null?M(S(i)):{},A(e||!i||!i.__esModule?W(r,"default",{value:i,enumerable:!0}):r,i));var f=k((K,C)=>{C.exports=uesio});var R=v(f());var n=v(f()),B=i=>{let e=n.component.getUtility("uesio/io.selectfield"),r=n.component.getUtility("uesio/io.fieldwrapper"),s=n.component.getUtility("uesio/io.mapfield"),{context:t,definition:T}=i,{mappingWireName:g,sheetWireName:h}=T,c=t.getRecord(),w=n.api.wire.useWire(g,t);if(!w)throw new Error("No mapping wire found: "+g);let a=w.getFirstRecord();if(!a)throw new Error("No record in mapping wire");let p=a.getFieldValue("uesio/smartsheet.fields"),m=c.getFieldValue("uesio/core.name");if(!m)throw new Error("No field name available");let V=c.getFieldValue("uesio/core.type");if(!m)throw new Error("No field type available");let b=c.getFieldValue("uesio/core.namespace");if(!b)throw new Error("No field namespace available");let d=b+"."+m,y=n.api.wire.useWire(h,t);if(!y)throw new Error("No sheet wire found: "+h);let E=y.getFirstRecord();if(!E)throw new Error("No record in sheets wire");let F=E.getFieldValue("uesio/smartsheet.columns");if(!F)throw new Error("No columns provided by sheets wire");let u=F.map(o=>({label:o.title,value:o.id+""}));u.unshift({label:"",value:""});let N=p?.[d]||{};return V==="MAP"?React.createElement(r,{context:t,variant:"uesio/io.table"},React.createElement(s,{value:Object.fromEntries(Object.entries(N).map(([o,l])=>[o,{column:l}])),setValue:o=>{console.log("Beh",o);let l=Object.fromEntries(Object.entries(o).map(([U,j])=>[U,j.column]));console.log("Modifieeed",l),a.update("uesio/smartsheet.fields",{...p,[d]:l},t)},mode:"EDIT",options:{keyField:{name:"path",label:"Path",type:"TEXT",namespace:"",accessible:!0,createable:!0,updateable:!0},valueField:{name:"column",label:"Column",type:"STRUCT",subfields:{column:{name:"column",label:"Column",type:"SELECT",selectlist:{options:u}}},namespace:"",accessible:!0,createable:!0,updateable:!0}},context:t})):React.createElement(r,{context:t,variant:"uesio/io.table"},React.createElement(e,{value:N,setValue:o=>{a.update("uesio/smartsheet.fields",{...p,[d]:o},t)},options:u,context:t}))},x=B;R.component.registry.register("uesio/smartsheet.mapper",x);})();
//# sourceMappingURL=runtime.js.map
